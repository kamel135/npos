var d=(p,_,r)=>new Promise((n,i)=>{var c=t=>{try{s(r.next(t))}catch(o){i(o)}},a=t=>{try{s(r.throw(t))}catch(o){i(o)}},s=t=>t.done?n(t.value):Promise.resolve(t.value).then(c,a);s((r=r.apply(p,_)).next())});import{_ as u}from"./index-CLcWQdf2.js";function v(p={}){const{immediate:_=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:i,onRegisteredSW:c,onRegisterError:a}=p;let s,t;const o=(e=!0)=>d(this,null,function*(){yield t});function l(){return d(this,null,function*(){if("serviceWorker"in navigator){if(s=yield u(()=>d(this,null,function*(){const{Workbox:e}=yield import("./workbox-window.prod.es5-mpLokdxb.js");return{Workbox:e}}),[]).then(({Workbox:e})=>new e("/assets/pos_next/pos/sw.js",{scope:"/assets/pos_next/pos/",type:"classic"})).catch(e=>{a==null||a(e)}),!s)return;s.addEventListener("activated",e=>{(e.isUpdate||e.isExternal)&&window.location.reload()}),s.addEventListener("installed",e=>{e.isUpdate||n==null||n()}),s.register({immediate:_}).then(e=>{c?c("/assets/pos_next/pos/sw.js",e):i==null||i(e)}).catch(e=>{a==null||a(e)})}})}return t=l(),o}export{v as registerSW};
