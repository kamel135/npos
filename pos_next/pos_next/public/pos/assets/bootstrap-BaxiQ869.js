var v=(o,l,a)=>new Promise((r,i)=>{var c=t=>{try{n(a.next(t))}catch(u){i(u)}},f=t=>{try{n(a.throw(t))}catch(u){i(u)}},n=t=>t.done?r(t.value):Promise.resolve(t.value).then(c,f);n((a=a.apply(o,l)).next())});import{W as P,i as d,x as y,y as m}from"./index-CLcWQdf2.js";const s=y.create("Bootstrap"),b=P("bootstrap",()=>{const o=d(!1),l=d(!1),a=d(null),r=d(null);function i(){return v(this,null,function*(){if(o.value)return s.debug("Bootstrap data already loaded"),a.value;if(l.value)return s.debug("Bootstrap already loading, waiting..."),yield new Promise(e=>{const h=setInterval(()=>{l.value||(clearInterval(h),e())},50)}),a.value;l.value=!0,r.value=null;try{s.info("Loading bootstrap data...");const e=yield m("pos_next.api.bootstrap.get_initial_data",{});if(e!=null&&e.success)return a.value=e,o.value=!0,s.success("Bootstrap data loaded",{hasShift:!!e.shift,locale:e.locale}),e;throw new Error("Bootstrap API returned unsuccessful response")}catch(e){return s.error("Failed to load bootstrap data",e),r.value=e.message||"Failed to load initial data",null}finally{l.value=!1}})}function c(){var e;return((e=a.value)==null?void 0:e.locale)||null}function f(){var e;return((e=a.value)==null?void 0:e.shift)||null}function n(){var e;return((e=a.value)==null?void 0:e.pos_profile)||null}function t(){var e;return((e=a.value)==null?void 0:e.pos_settings)||null}function u(){var e;return((e=a.value)==null?void 0:e.payment_methods)||[]}function p(){return o.value&&a.value!==null}function g(){o.value=!1,l.value=!1,a.value=null,r.value=null}return{loaded:o,loading:l,data:a,error:r,loadInitialData:i,getPreloadedLocale:c,getPreloadedShift:f,getPreloadedPOSProfile:n,getPreloadedPOSSettings:t,getPreloadedPaymentMethods:u,hasBootstrapData:p,reset:g}});export{b as useBootstrapStore};
